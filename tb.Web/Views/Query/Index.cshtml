<!--  Change to QuerySearchViewModel -->
@model QuerySearchViewModel

<partial name="_Breadcrumbs" model=@(new [] { ("/", "Home"), ("/query", "Queries"), ("","Index") })>
<h3>Query List</h3>

   <div class=" d-flex justify-content-between align-items-center">  
      
      <a asp-action="Create" class="btn btn-sm btn-primary "><i class="bi bi-question-diamond p-1"></i>Create Query</a> 

      <!-- add partial to search query issues- inline form -->
      <partial name="_Search" />
      
   </div>
    


<div class="card shadow rounded bg-light p-3">
    <div class="row pl-3">

      <table class="table table-striped">
         <thead>
            <tr>
               <th>Id</th>
               <th>Student Name</th>          
               <th>Created</th> 
               <th>Issue</th> 
               <th>Active</th>   
               <th>Actions</th>
            </tr>
         </thead>
         <tbody>
            @foreach(var t in Model.Queries) { 
               <tr>
                  <td>@t.Id</td>
                  <td>@t.Student.Name</td>
                  <td>@t.CreatedOn.ToShortDateString()</td>
                  <td>@t.Issue.Substring(0, t.Issue.Length < 20 ? t.Issue.Length : 20) ...</td>
                  <td>
                     <i asp-condition="@t.Active"    class="bi bi-toggle-on"></i>
                     <i asp-condition="@(!t.Active)" class="bi bi-toggle-off"></i>  
                  </td>
                  <td>
                     <a asp-action="Details" asp-route-id="@t.Id"><i class="bi bi-lightbulb"></i> Details</a>                                          
                  </td>
               </tr>
            }
         </tbody>
      </table>
   </div>
</div>
